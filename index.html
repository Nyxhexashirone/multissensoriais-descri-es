<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Reprodutor de Áudio Multissensorial</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
        select, button {
            margin: 10px;
            padding: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>

    <h1>Reprodutor de Áudio Multissensorial</h1>
    
    <label for="voiceSelect">Voz:</label>
    <select id="voiceSelect"></select>

    <label for="speedControl">Velocidade:</label>
    <button onclick="changeSpeed(-0.1)">-</button>
    <span id="speedValue">1.0</span>
    <button onclick="changeSpeed(0.1)">+</button>

    <br><br>
    <button onclick="playAudio()">Reproduzir</button>
    <button onclick="stopAudio()">Parar</button>
    <button onclick="previousDescription()">Voltar</button>
    <button onclick="nextDescription()">Avançar</button>

    <h2 id="title"></h2>
    <p id="description"></p>

    <script>
        let synth = window.speechSynthesis;
        let voices = [];
        let descriptions = [
            { title: "Informação Analógica vs Sensorial", description: "A informação analógica são dados sobre uma experiência, como 'a bola era vermelha'. A informação sensorial é a representação dos sentidos, como a imagem da bola ou o som ao quicá-la." },
            { title: "Como Ativar o Pensamento Sensorial", description: "Para acessar a informação sensorial, tente lembrar como um som específico se parece ou como certas texturas são sentidas na pele." },
            { title: "Exercícios para Desenvolver a Visualização", description: "Olhe para um objeto por um segundo e tente lembrar sua forma e cor sem olhar novamente. Com o tempo, isso fortalece a memória visual." }
        ];
        let currentIndex = 0;
        let speed = 1.0;
        let selectedVoice = null;

        function populateVoices() {
            voices = synth.getVoices().filter(voice => voice.lang === "pt-BR");
            let voiceSelect = document.getElementById("voiceSelect");
            voiceSelect.innerHTML = "";
            voices.forEach((voice, index) => {
                let option = document.createElement("option");
                option.textContent = voice.name;
                option.value = index;
                voiceSelect.appendChild(option);
            });
        
            if (!selectedVoice && voices.length > 0) {
                selectedVoice = voices[2];  // Selecionando a voz
            }
        
            voiceSelect.value = voices.indexOf(selectedVoice);
        }


        function changeSpeed(delta) {
            speed = Math.max(0.1, Math.min(3.0, speed + delta));
            document.getElementById("speedValue").innerText = speed.toFixed(1);
        }

        function playAudio() {
            if (synth.speaking) {
                synth.cancel();
            }
            let utterance = new SpeechSynthesisUtterance(descriptions[currentIndex].title + ". " + descriptions[currentIndex].description);
            utterance.voice = selectedVoice; // Usa a voz selecionada
            utterance.rate = speed; // Usa a velocidade configurada
            utterance.onend = function() {
                nextDescription();
            };
            synth.speak(utterance);
        }

        function stopAudio() {
            synth.cancel();
        }

        function nextDescription() {
            currentIndex = (currentIndex + 1) % descriptions.length;
            updateDescription();
            playAudio();
        }

        function previousDescription() {
            currentIndex = (currentIndex - 1 + descriptions.length) % descriptions.length;
            updateDescription();
            playAudio();
        }

        function updateDescription() {
            document.getElementById("title").innerText = descriptions[currentIndex].title;
            document.getElementById("description").innerText = descriptions[currentIndex].description;
        }

        document.getElementById("voiceSelect").addEventListener("change", function() {
            selectedVoice = voices[this.value];
        });

        window.speechSynthesis.onvoiceschanged = populateVoices;

        updateDescription();
    </script>

</body>
</html>
